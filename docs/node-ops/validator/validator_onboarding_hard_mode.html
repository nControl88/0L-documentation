<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-node-ops/validator/validator_onboarding_hard_mode">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<title data-rh="true">Validator Onboarding Guide: Hard Mode | 0L Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ncontrol88.github.io//0L-documentation/docs/node-ops/validator/validator_onboarding_hard_mode"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Validator Onboarding Guide: Hard Mode | 0L Documentation"><meta data-rh="true" name="description" content="- Validator Setup"><meta data-rh="true" property="og:description" content="- Validator Setup"><link data-rh="true" rel="icon" href="/0L-documentation/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ncontrol88.github.io//0L-documentation/docs/node-ops/validator/validator_onboarding_hard_mode"><link data-rh="true" rel="alternate" href="https://ncontrol88.github.io//0L-documentation/docs/node-ops/validator/validator_onboarding_hard_mode" hreflang="en"><link data-rh="true" rel="alternate" href="https://ncontrol88.github.io//0L-documentation/docs/node-ops/validator/validator_onboarding_hard_mode" hreflang="x-default"><link rel="stylesheet" href="/0L-documentation/assets/css/styles.5b62384b.css">
<link rel="preload" href="/0L-documentation/assets/js/runtime~main.5d0bd578.js" as="script">
<link rel="preload" href="/0L-documentation/assets/js/main.35f3f50e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/0L-documentation/"><div class="navbar__logo"><img src="/0L-documentation/img/0l-logo.png" alt="0L" class="themedImage_ToTc themedImage--light_HNdA"><img src="/0L-documentation/img/0l-logo.png" alt="0L" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">0L Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/0L-documentation/docs/intro">Developer</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/OLSF/libra" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/0L-documentation/docs/intro">0L&#x27;s Tech Stack</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/0L-documentation/docs/node-ops">Node Operations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Node Operations&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/0L-documentation/docs/node-ops/validator">Validator</a><button aria-label="Toggle the collapsible sidebar category &#x27;Validator&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/changing_onchain_ip_address">Update On-chain Node Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/cron_job_setup_for_validator_node_status">Cronjob setup for validator node status</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/node_falls_out_of_validator_set">How to Recover a Validator If It Stops Mining and Falls Out of the Set</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/node_statistics">Node Statistics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/resetting_val_configs">Recreate all configs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/troubleshooting_onboarding">Documentation on Past Issues and Possible solutions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/update_validator_to_operator_mapping">Update Validator to Operator mapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/validator_daemon_configs">Running 0L validator as a system service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/validator_onboarding_easy_mode">Validator Onboarding Guide: Easy Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/0L-documentation/docs/node-ops/validator/validator_onboarding_hard_mode">Validator Onboarding Guide: Hard Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/vfn_validator_fullnode_setup">Validator node file</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/web_monitor">How to Configure Web Monitor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/0L-documentation/docs/node-ops/validator/web_monitor_account_dictionary">How to Configure Web Monitor Account Dictionary</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/0L-documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/0L-documentation/docs/node-ops"><span itemprop="name">Node Operations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/0L-documentation/docs/node-ops/validator"><span itemprop="name">Validator</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Validator Onboarding Guide: Hard Mode</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Validator Onboarding Guide: Hard Mode</h1><ul><li><a href="#validator-setup">Validator Setup</a><ul><li><a href="#requirements">Requirements</a></li><li><a href="#firewall">Firewall</a><ul><li><a href="#validator">Validator</a></li><li><a href="#vfn">VFN</a></li></ul></li><li><a href="#high-level-steps">High-level steps</a></li><li><a href="#tmux-basics">TMUX basics</a></li><li><a href="#1-set-up-a-host">1. Set up a host</a><ul><li><a href="#create-binaries">Create Binaries</a></li></ul></li><li><a href="#2-generate-account-keys">2. Generate account keys</a></li><li><a href="#3-fast-forward-to-the-most-recent-state-snapshot">3. Fast forward to the most recent state snapshot</a></li><li><a href="#4-start-the-validator-in-fullnode-mode">4. Start the validator in <code>fullnode</code> mode</a></li><li><a href="#5-start-producing-delay-proofs-on-validator-delay-mining">5. Start producing delay proofs on validator (&quot;delay mining&quot;)</a></li><li><a href="#6-create-vfn-config-and-deploy-the-vfn">6. Create VFN config and deploy the VFN</a><ul><li><a href="#return-to-validator-machine">Return to validator machine</a></li><li><a href="#return-to-vfn">Return to VFN</a></li></ul></li><li><a href="#7-restart-validator-node-in-validator-mode">7. Restart validator node in <code>validator</code> mode</a></li><li><a href="#log-rotation">Log Rotation</a></li><li><a href="#optional-establish-metric-exporter-for-centralized-monitoring">[Optional] Establish metric exporter for centralized monitoring</a></li><li><a href="#onboarder-troubleshooting">Onboarder Troubleshooting</a></li><li><a href="#onboarder-instructions">Onboarder instructions</a></li><li><a href="#troubleshooting">Troubleshooting</a><ul><li><a href="#cargo-or-rust-are-not-installed">cargo or rust are not installed</a></li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">​</a></h2><ul><li>TWO unix hosts, one for Validator Node, and one for the Private Fullnode (&quot;VFN&quot;).
0L code targets Ubuntu 20.4</li><li>Recommended specs:<ul><li>Validator: 300GB SSD harddrive, 8 core CPU, 16G RAM</li><li>VFN: 100G storage, 8 core CPU, 16G RAM</li></ul></li><li>Separate static IP addresses for the machines, or appropriate DNS mapping.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="firewall">Firewall<a class="hash-link" href="#firewall" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validator">Validator<a class="hash-link" href="#validator" title="Direct link to heading">​</a></h3><p>The following ports must be open: 6179, 6180, 3030</p><ul><li>6180 should be open on all interfacess <code>0.0.0.0/0</code>, it&#x27;s for consensus and uses noise encryption.</li><li>6179 is for the private validator fullnode network (&quot;VFN&quot;), the firewall should only allow the IP of the fullnode to access this port.</li><li>3030 is for your <code>web-monitor</code> dashboard, so could just be your home IP if it&#x27;s fixed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vfn">VFN<a class="hash-link" href="#vfn" title="Direct link to heading">​</a></h3><p>Note: this node does not serve transactions, and does not participate in consensus, it relays data out of the validator node, and transactions into the validator.</p><p>The following ports must be open: 6178, 6179</p><ul><li>6178 is for the the PUBLIC fullnode network. This is how the public nodes that will be serving JSON-RPC on the network will receive data and submit transactions to the network.</li><li>6179 is for the private validator fullnode network (&quot;VFN&quot;), it should only allow traffic from the Validator node IP address above.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-steps">High-level steps<a class="hash-link" href="#high-level-steps" title="Direct link to heading">​</a></h2><ol><li>Set up a host - Install binaries.</li><li>Generate a public mining/validator key and associated mneumonic.<br>2.1 Generate and share your <code>account.json</code> file with someone who has gas and can execute the onboarding transaction for you.</li><li>Get the latest snapshot state of the network by running <code>ol restore</code>.</li><li>Start your node in <em>fullnode</em> mode.<br>4.1. Allow your validator in the <em>fullnode</em> mode to sync up with the network. Depending on how old the snapshot obtained from <code>ol restore</code> is, this
may take a while (1 hr or more). To check the state of the sync run <code>db-backup one-shot query node-state</code>.</li><li>Start the tower app which will produce and submit VDF proofs to the chain.<br><strong>note</strong> if your node is not fully synced and if you have not been onboarded yet, you will see errors from the tower app
until your node has caught up to the current state and you have been onboarded.</li><li>Create VFN configs, and deploy the VFN.<br>6.1 Check and update your on-chain configuration</li><li>Restart your node in <em>validator</em> mode. You will join in the next epoch if you have been on boarded by an active validator.</li><li>View <a href="https://0lexplorer.io/" target="_blank" rel="noopener noreferrer">ol explorer</a> to see the state of the network, you should see your validators public key in the list of validators.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tmux-basics">TMUX basics<a class="hash-link" href="#tmux-basics" title="Direct link to heading">​</a></h2><ol><li>New session: <code>tmux new -s &lt;SESSION_NAME&gt;</code></li><li>Detach from Session: press Ctrl-b and then d</li><li>rejoin unnamed session, if only one session exists: <code>tmux a</code></li><li>rejoin unnamed session by id: <code>tmux ls</code> to get the ID and then <code>tmux a -t &lt;SESSION_ID&gt;</code></li><li>rejoin named session: <code>tmux attach -t &lt;SESSION_NAME&gt;</code></li><li>kill session: attach to the session --&gt; press Ctrl-b, then type <code>:kill-session</code> and press ENTER</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-set-up-a-host">1. Set up a host<a class="hash-link" href="#1-set-up-a-host" title="Direct link to heading">​</a></h2><p>These instructions target Ubuntu.</p><p>1.1. Set up an Ubuntu host with <code>ssh</code> access, e.g. in a cloud service provider.</p><p>1.2. Associate a static IP with your host, this will be tied to you account. This address will be shared on the chain, so that other nodes will be able to find you through the peer discovery mechanism.</p><p>1.3. 0L binaries should be run in a linux user that has very narrow permissions. Before you can create binaries you&#x27;ll need some tools installed probably by <code>sudo</code> and likely in root.
A helpful script to install dependencies exists here: github.com/OLSF/libra/main/ol/util/setup.sh</p><p>You can run it with a curl bash:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> -sL https://raw.githubusercontent.com/OLSF/libra/main/ol/util/setup.sh </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1.4. Use <code>tmux</code> to persist the terminal session for build, as well as for running the nodes and tower app. Also this setup requires <code>git</code> and <code>make</code>, which might be installed already on your host. If not, perform the following steps now:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -y </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">zip</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">unzip</span><span class="token plain"> jq build-essential cmake clang llvm libgmp-dev secure-delete pkg-config libssl-dev lld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1.5. Create the linux user that will run the 0L services.</p><p>We will create a user called <code>node</code> which has no password (can only be accessed initially by sudo).</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useradd</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> -m -s /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can then access that account via <code>sudo su node</code>. Or setup ssh keys under <code>/home/node/.ssh/authorized_keys</code>.</p><p>1.6. Install Rust on the <code>node</code> user</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">su</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># you are now in the node user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> https://sh.rustup.rs -sSf </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sh</span><span class="token plain"> -s -- --default-toolchain stable -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># restart your bash instance to pickup the cargo paths</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">.</span><span class="token plain"> ~/.bashrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># install some command-line tools</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cargo </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> toml-cli</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-binaries">Create Binaries<a class="hash-link" href="#create-binaries" title="Direct link to heading">​</a></h3><p>It is recommended to perform the steps from 1.4 onwards inside tmux. Short tmux intruction:</p><p>1.7 Start a new <a href="#tmux-basics">tmux</a> session</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># start a new tmux session</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tmux new -s installation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1.8. Clone this repo:</p><p><code>git clone https://github.com/OLSF/libra.git</code></p><p>For more details: (../devs/OS_dependencies.md)</p><p>1.9. Build the source and install binaries:
This takes a while, ensure your are still inside the <code>tmux</code> session to avoid your session gets disconnected.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">/path/to/libra-source/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> bins </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1.10. Fetch the web server files</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ol serve --update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># alternatively</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> web-files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If your session can not resolve the ol binary source either reload the session
or <code>cd</code> to the directory where the binaries were build (e.g. for node user <code>/home/node/bin</code>) and use <code>./ol</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-generate-account-keys">2. Generate account keys<a class="hash-link" href="#2-generate-account-keys" title="Direct link to heading">​</a></h2><p>Before you start: have the static IP address you wish to associate with your validator, and a fun personal statement
to place in your first proof.</p><p>2.1. Generate new keys and account: <code>onboard keygen</code>. Run as many times as you like, and choose a mnemonic.
<strong>Mnemonic and keys are not saved anywhere, write them down now</strong>.</p><p>2.2. Run the validator onboarding wizard inside a <a href="#tmux-basics">tmux</a> session, and answer the questions:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># start wizard with template</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">onboard val -u http://</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ip-address-of-the-one-who-onboards-you</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:3030</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># note, this person needs to be already running a validator, ask in the discord for their ip address. If you navigate to &lt;ip-address&gt;:3030, you should be able to see their validator node&#x27;s health.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># start wizard without template, note: assumes an autopay_batch.json is in the project root.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">onboard val</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>2.3. Send the generated <code>~/.0L/account.json</code> to someone that has GAS (the one who wants to onboard you) and can execute the account creation transaction for you.</p><p><strong>If you are onboaring someone and receive the <code>account.json</code> see <a href="#onboarder-instructions">onboarder instructions</a></strong></p><p>2.4. Backup your files: <code>cp -r ~/.0L/* ~/.0L/init-backup/</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-fast-forward-to-the-most-recent-state-snapshot">3. Fast forward to the most recent state snapshot<a class="hash-link" href="#3-fast-forward-to-the-most-recent-state-snapshot" title="Direct link to heading">​</a></h2><p>Speed up the sync of your ledger by restoring a backup before starting a fullnode (next step).
The following command will fetch the latest epoch archive, usually from within the last 24h.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ol restore</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-start-the-validator-in-fullnode-mode">4. Start the validator in <code>fullnode</code> mode<a class="hash-link" href="#4-start-the-validator-in-fullnode-mode" title="Direct link to heading">​</a></h2><p><strong>note</strong>: temporarily: as of v4.2.8 you&#x27;ll need to increase your host&#x27;s file descriptors. Fix is in the works. For now:
run this before starting your <a href="#tmux-basics">tmux</a> session.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># increase file descriptors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">ulimit</span><span class="token plain"> -n </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># check that they have been increased</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">ulimit</span><span class="token plain"> -n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">100000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or edit the <code>/etc/security/limits.conf</code> file to make this change persistent across sessions:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> /etc/security/limits.conf`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>append to the end of the <code>limits.conf</code>. replace <code>yourusername</code> with the output from <code>whoami</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yourusername soft    nproc          </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yourusername soft    nproc          </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yourusername hard    nproc          </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yourusername soft    nofile         </span><span class="token number" style="color:#36acaa">100000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4.1 To enable the node to run after you detach from your terminal session, start within a
<a href="#tmux-basics">tmux</a> session.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux new -s fullnode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># verify your file handlers have been increased</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">ulimit</span><span class="token plain"> -n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">100000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>inside the <a href="#tmux-basics">tmux</a> session start the node in fullnode mode.</p><p>Consider using <a href="#log-rotation">log rotation</a> to start the <code>diem-node</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># create log directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> ~/.0L/logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># start node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">diem-node --config ~/.0L/fullnode.node.yaml  </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> ~/.0L/logs/node.log </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>4.2. Check your logs. <code>tail -f ~/.0L/logs/node.log</code></p><p>When the sync is ongoing, you&#x27;d see something like this:</p><div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">======================================  round is 17897</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">======================================  round is 17898</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">======================================  round is 17899</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You might see some network errors due to drops, but should again see round numbers.</p><p>This command will tell you the sync state of a RUNNING local node: <code>db-backup one-shot query node-state</code>.
You can compare the block height with the one on the <a href="https://0l.interblockcha.in/" target="_blank" rel="noopener noreferrer">block explorer</a>.</p><p>While waiting for the sync to complete, it is a good opportunity, to set up the web monitor (but you can also do it any time later). Please follow the instructions here:</p><p><a href="/0L-documentation/docs/node-ops/validator/web_monitor">Set up web monitor</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-start-producing-delay-proofs-on-validator-delay-mining">5. Start producing delay proofs on validator (&quot;delay mining&quot;)<a class="hash-link" href="#5-start-producing-delay-proofs-on-validator-delay-mining" title="Direct link to heading">​</a></h2><p>Before you start: You will need your mnemonic.</p><p>5.1. Run the tower app within its own <a href="#tmux-basics">tmux</a> session:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux new -s tower</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>5.2. From inside the <a href="#tmux-basics">tmux</a> session, start the tower app:</p><p>(Consider using <a href="#log-rotation">log rotation</a> to start the <code>tower</code> app.)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tower -o start </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> ~/.0L/logs/tower.log </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you get an error like:</p><div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Caused by:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Connection Failed: Connection refused (os error 111)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: could not create client connection, message: Cannot connect to any JSON RPC peers in the list of upstream_nodes in 0L.toml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Change the <code>upstream_nodes</code> in your <code>~/.0L/0L.toml</code> to <code>upstream_nodes = [&quot;http://localhost:8080/&quot;]</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-create-vfn-config-and-deploy-the-vfn">6. Create VFN config and deploy the VFN<a class="hash-link" href="#6-create-vfn-config-and-deploy-the-vfn" title="Direct link to heading">​</a></h2><p>6.1 Follow <a href="#1.-Set-up-a-host">step 1</a> to set up a new host and install binaries</p><p>6.2 Fast Forward to the latest snapshot by following <a href="#3.-Fast-forward-to-the-most-recent-state-snapshot">step 3</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="return-to-validator-machine">Return to validator machine<a class="hash-link" href="#return-to-validator-machine" title="Direct link to heading">​</a></h3><p>6.2 Update validator 0L.toml file</p><p>Under <code>profile</code> include a <code>vfn_ip</code> field, with the IP address. This will simplify and correctly display networking addresses for the info helpers.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">profile</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">account </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;foo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth_key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bar&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">statement </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;baz&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># NEW FIELD HERE:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vfn_ip </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;x.y.z.0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>6.3 Create your VFN configs on validator, and deploy on VFN.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># On your validator (or wherever your key_store.json lives)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># create settings for the VFN, private fullnode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ol init --vfn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># now copy the vfn.node.yaml file to your VFN machine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>6.4 Check and update your on-chain configuration on validator node</p><p>More details here:
<a href="/0L-documentation/docs/node-ops/documentation/node-ops/validators/changing_onchain_ip_address.md">Check and change your on-chain config</a></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># what are your keys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ol </span><span class="token function" style="color:#d73a49">whoami</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># do your keys match what your node is using</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ol </span><span class="token function" style="color:#d73a49">whoami</span><span class="token plain"> --check-yaml </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path/to/node.yaml</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># what are your current on-chain configs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ol query --val-config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Update your configs based on what your mnemonic uses</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Note the `-o` which means you are sending this from the &quot;operator&quot; account.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">txs -o val-config --val-ip </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">IP</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --vfn-ip </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">OTHER IP</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># check if those changes persisted and if they are able to be read.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ol query --val-config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4.1</span><span class="token plain"> To </span><span class="token builtin class-name">enable</span><span class="token plain"> the </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> to run after you detach from your terminal session, start within a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">tmux</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> session.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**note**: temporarily: as of v4.2.8 you</span><span class="token string" style="color:#e3116c">&#x27;ll need to increase your host&#x27;</span><span class="token plain">s </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> descriptors. Fix is </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the works. For now:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">run this before starting your </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">tmux</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> session.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="return-to-vfn">Return to VFN<a class="hash-link" href="#return-to-vfn" title="Direct link to heading">​</a></h3><p>6.5 Configure and start VFN</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># increase file d</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">escriptors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">ulimit</span><span class="token plain"> -n </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#### check that they have been increased</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">ulimit</span><span class="token plain"> -n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">100000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or edit the <code>/etc/security/limits.conf</code> file to make this change persistent across sessions:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> /etc/security/limits.conf`</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>append to the end of the <code>limits.conf</code>. replace <code>yourusername</code> with the output from <code>whoami</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yourusername soft    nproc          </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yourusername soft    nproc          </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yourusername hard    nproc          </span><span class="token number" style="color:#36acaa">100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yourusername soft    nofile         </span><span class="token number" style="color:#36acaa">100000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>start your VFN in a <a href="#tmux-basics">tmux</a> session.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux new -s vfn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># verify your file handlers have been increased</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">ulimit</span><span class="token plain"> -n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">100000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>inside the <a href="#tmux-basics">tmux</a> session start the VFN in VFN mode.</p><p>Consider using <a href="#log-rotation">log rotation</a> to start the <code>diem-node</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># create log directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> ~/.0L/logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># start node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">diem-node --config ~/.0L/vfn.node.yaml  </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> ~/.0L/logs/node.log </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>6.6 Check your logs. <code>tail -f ~/.0L/logs/node.log</code></p><p>When the sync is ongoing, you&#x27;d see something like this:</p><div class="language-log codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-log codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">======================================  round is 17897</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">======================================  round is 17898</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">======================================  round is 17899</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You might see some network errors due to drops, but should again see round numbers.</p><p>This command will tell you the sync state of a RUNNING local node: <code>db-backup one-shot query node-state</code></p><blockquote><p>‼️ <strong>You must be onboarded by an existing validator to continue</strong></p><p>To become a validator a user must display an intention to contribute to the ecosystem.
This can be done by many different ways like building tools, helping out the ecosystem and more.
If you would like to contribute reach out the the Hustle Karma channel in <a href="https://discord.gg/cfXd9Ngk" target="_blank" rel="noopener noreferrer">Discord</a>. When a validator is ready to
onboard you they can do it by the following command:</p><p><code>txs create-validator -u http://[your-ip-address]</code></p><p>Currently you need 4 validators to vote for you (your onboading partner included), you can kindly ask in the <a href="https://discord.com/channels/833074824447655976/925880684193677332" target="_blank" rel="noopener noreferrer">validator-onboarding discord channel</a>.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-restart-validator-node-in-validator-mode">7. Restart validator node in <code>validator</code> mode<a class="hash-link" href="#7-restart-validator-node-in-validator-mode" title="Direct link to heading">​</a></h2><p>Once the network is in sync, sufficient mining has been done (8 proofs per epoch/day) and you received the 4 vouches, you are eligible to enter the
validator set.</p><p>Once in the validator set, the node can connect to other validators and sign blocks.</p><p>7.1. On the next epoch, start node in <code>validator</code> mode.</p><p>Restarting your node in validator mode inside a <a href="#tmux-basics">tmux</a> session.</p><p>Again, there may be an issue with file descriptors, increase with <code>ulimit -n 100000</code> before starting node</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># stop diem node daemon</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># and just in case, stop all processes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">killall</span><span class="token plain"> diem-node</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>start a <a href="#tmux-basics">tmux</a> session</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux new -s validator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>optionally increase file descriptors limit, temporary fix for v4.2.8</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">ulimit</span><span class="token plain"> -n </span><span class="token number" style="color:#36acaa">100000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>then restart node with (consider using <a href="#log-rotation">log rotation</a> to start the <code>diem-node</code>)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diem-node --config  ~/.0L/validator.node.yaml </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> ~/.0L/logs/validator.log </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>7.2 Restart the tower app after your validator is running, refer to <a href="#5-start-producing-delay-proofs-on-validator-%22delay-mining%22">Step 5</a> - <code>Ctrl + C</code> and restart it.</p><p>Once you have been on boarded you should see you public key in the list of validators. Run the web monitor to view:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ol serve -c</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="log-rotation">Log Rotation<a class="hash-link" href="#log-rotation" title="Direct link to heading">​</a></h2><p>The size of the log files from the <code>diem-node</code> and the <code>tower</code> app can increase very fast. Please consider using log rotation. You can establish
this for example with <a href="https://linux.die.net/man/8/logrotate" target="_blank" rel="noopener noreferrer">logrotate</a> or <a href="https://manpages.debian.org/stretch/daemontools/multilog.8.en.html" target="_blank" rel="noopener noreferrer">multilog</a>.</p><p>Here is an example how you can establish log rotation with <a href="https://manpages.debian.org/stretch/daemontools/multilog.8.en.html" target="_blank" rel="noopener noreferrer">multilog</a>
for the <code>diem-node</code> and the <code>tower</code> app. Note: This only works on debian based systems, but ubuntu is recommended for this setup anyways.</p><ol><li><p>Install daemontools (multilog is a part of daemontools): <code>apt-get install daemontools</code></p></li><li><p>Example on how to start the diem-node in fullnode mode with log rotation:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diem-node --config ~/.0L/fullnode.node.yaml </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> multilog s104857600 n10 ~/.0L/logs/node</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This means the logs will be written to a folder <code>~/.0L/logs/node</code>. Everytime the current log file reaches the max size of 100MB (<code>s104857600</code> =&gt; 104857600 Bytes)
it will be rotated. After 10 rotations <code>n10</code> it will be deleted. This means only the latest 1GB of log entries are constantly available on the server.
Of course you can vary this settings to fit your specific needs.</p></li><li><p>Example on how to start the <code>tower</code> app with log rotation:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tower -o start </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> multilog s104857600 n10 ~/.0L/logs/tower</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-establish-metric-exporter-for-centralized-monitoring">[Optional]<!-- --> Establish metric exporter for centralized monitoring<a class="hash-link" href="#optional-establish-metric-exporter-for-centralized-monitoring" title="Direct link to heading">​</a></h2><p>There is a centralized prometheus-grafana based monitoring stack you can connect with as a validator.
To set it up follow the instructions <a href="https://hackmd.io/9dxv7ZwYS1yOmBVSjSV2wg" target="_blank" rel="noopener noreferrer">on this page</a>.</p><p>Note: For the monitoring the ports 9100, 9101 and 9102 should be open for the static IP address of the central prometheus
node. You can find this IP also in the <!-- -->[set up instructions]<!-- -->(<a href="https://hackmd.io/9dxv7ZwYS1yOmBVSjSV2wg" target="_blank" rel="noopener noreferrer">on this page</a>).</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="onboarder-troubleshooting">Onboarder Troubleshooting<a class="hash-link" href="#onboarder-troubleshooting" title="Direct link to heading">​</a></h2><p>If you are having troubles onboarding, please see whether they match any of the issues here:
<a href="/0L-documentation/docs/node-ops/validators/troubleshoting_onboarding.md">troubleshooting onboarding</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="onboarder-instructions">Onboarder instructions<a class="hash-link" href="#onboarder-instructions" title="Direct link to heading">​</a></h2><p>If you are onboarding someone and have received their <code>account.json</code> file</p><ol><li>Copy the <code>account.json</code> to your local node.</li><li>Submit a tx with <code>txs</code> app:
`txs create-validator --account-file &lt;path/to/account.json&gt;</li></ol><p>Troubleshooting: If there is an issue with sequence_number out of sync. Retry the transaction.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cargo-or-rust-are-not-installed">cargo or rust are not installed<a class="hash-link" href="#cargo-or-rust-are-not-installed" title="Direct link to heading">​</a></h3><p>After <code>rust</code> and <code>cargo</code> are installed you are prompted to set a <code>PATH</code> environment variable.
Follow those instructions or reset your terminal.</p><p><img loading="lazy" alt="rust config instructions" src="/0L-documentation/assets/images/rust-config-output-776a688f3cbab81a0b9caf6b7bdbe9a0.png" width="483" height="153" class="img_ev3q"></p><p>To configure your current shell, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">source</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/.cargo/env</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nControl88/0l-documentation-source/tree/main/docs/node-ops/validator/validator_onboarding_hard_mode.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/0L-documentation/docs/node-ops/validator/validator_onboarding_easy_mode"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Validator Onboarding Guide: Easy Mode</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/0L-documentation/docs/node-ops/validator/vfn_validator_fullnode_setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Validator node file</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#firewall" class="table-of-contents__link toc-highlight">Firewall</a><ul><li><a href="#validator" class="table-of-contents__link toc-highlight">Validator</a></li><li><a href="#vfn" class="table-of-contents__link toc-highlight">VFN</a></li></ul></li><li><a href="#high-level-steps" class="table-of-contents__link toc-highlight">High-level steps</a></li><li><a href="#tmux-basics" class="table-of-contents__link toc-highlight">TMUX basics</a></li><li><a href="#1-set-up-a-host" class="table-of-contents__link toc-highlight">1. Set up a host</a><ul><li><a href="#create-binaries" class="table-of-contents__link toc-highlight">Create Binaries</a></li></ul></li><li><a href="#2-generate-account-keys" class="table-of-contents__link toc-highlight">2. Generate account keys</a></li><li><a href="#3-fast-forward-to-the-most-recent-state-snapshot" class="table-of-contents__link toc-highlight">3. Fast forward to the most recent state snapshot</a></li><li><a href="#4-start-the-validator-in-fullnode-mode" class="table-of-contents__link toc-highlight">4. Start the validator in <code>fullnode</code> mode</a></li><li><a href="#5-start-producing-delay-proofs-on-validator-delay-mining" class="table-of-contents__link toc-highlight">5. Start producing delay proofs on validator (&quot;delay mining&quot;)</a></li><li><a href="#6-create-vfn-config-and-deploy-the-vfn" class="table-of-contents__link toc-highlight">6. Create VFN config and deploy the VFN</a><ul><li><a href="#return-to-validator-machine" class="table-of-contents__link toc-highlight">Return to validator machine</a></li><li><a href="#return-to-vfn" class="table-of-contents__link toc-highlight">Return to VFN</a></li></ul></li><li><a href="#7-restart-validator-node-in-validator-mode" class="table-of-contents__link toc-highlight">7. Restart validator node in <code>validator</code> mode</a></li><li><a href="#log-rotation" class="table-of-contents__link toc-highlight">Log Rotation</a></li><li><a href="#optional-establish-metric-exporter-for-centralized-monitoring" class="table-of-contents__link toc-highlight">Optional Establish metric exporter for centralized monitoring</a></li><li><a href="#onboarder-troubleshooting" class="table-of-contents__link toc-highlight">Onboarder Troubleshooting</a></li><li><a href="#onboarder-instructions" class="table-of-contents__link toc-highlight">Onboarder instructions</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#cargo-or-rust-are-not-installed" class="table-of-contents__link toc-highlight">cargo or rust are not installed</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                <img src="/0l-documentation/img/0l-logo.png" class="logo" alt="0L Icon">
              </li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">Copyright © 2022 0L Documentation.<br>Built with Docusaurus.</li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/AzCp63pggW" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/OLSF/libra" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/0L-documentation/assets/js/runtime~main.5d0bd578.js"></script>
<script src="/0L-documentation/assets/js/main.35f3f50e.js"></script>
</body>
</html>